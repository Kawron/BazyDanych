<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Karol Wrona - Entity Framework</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.13.24"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="karol-wrona---entity-framework">Karol Wrona - Entity Framework</h1>
<ul>
<li><a href="#karol-wrona---entity-framework">Karol Wrona - Entity Framework</a>
<ul>
<li><a href="#1-relacja-product-supplier">1. Relacja Product Supplier</a></li>
<li><a href="#2-odwracanie-relacji">2. Odwracanie relacji</a></li>
<li><a href="#3-relacja-dwustronna">3. Relacja dwustronna</a></li>
<li><a href="#4-many-to-many">4. Many to many</a></li>
<li><a href="#5-dziedziczenie---table-per-hierarchy">5. Dziedziczenie - table per hierarchy</a></li>
<li><a href="#6-dziedziczenie---table-per-class">6. Dziedziczenie - table per class</a></li>
<li><a href="#podsumowanie-dziedziczenia">Podsumowanie dziedziczenia</a></li>
</ul>
</li>
</ul>
<h3 id="1-relacja-product-supplier">1. Relacja Product Supplier</h3>
<p>Stworzyłem nową klasę <em>Supplier</em>:</p>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Supplier</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> SupplierID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? CompanyName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? Street { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? City { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
</div></code></pre>
<p>Oraz dodałem nowe pole w klasie <em>Product</em>:</p>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> ProductID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? ProductName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> UnitsOnStock { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> Supplier? IsSuppliedBy { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
</div></code></pre>
<p>A także dodałem nowy dataSet w <em>ProductContext</em>:</p>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProductContext</span> : <span class="hljs-title">DbContext</span>
    {
        <span class="hljs-keyword">public</span> DbSet&lt;Product&gt; Products { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> DbSet&lt;Supplier&gt; Suppliers { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnConfiguring</span>(<span class="hljs-params">DbContextOptionsBuilder optionsBuilder</span>)</span>
        {
            <span class="hljs-keyword">base</span>.OnConfiguring(optionsBuilder);
            optionsBuilder.UseSqlite(<span class="hljs-string">&quot;Datasource=ProductsDatabase&quot;</span>);
        }
    }
</div></code></pre>
<p>Tak wygląda schemat bazy danych:</p>
<p><img src=".\images\prod-sup.png" alt="1"></p>
<p>Dodajmy teraz nowego dostawce:</p>
<pre><code class="language-c#"><div>ProductContext productContex = <span class="hljs-keyword">new</span> ProductContext();

Supplier supplier = <span class="hljs-keyword">new</span> Supplier { CompanyName=<span class="hljs-string">&quot;Mlekopol&quot;</span>, City=<span class="hljs-string">&quot;Cracow&quot;</span>, Street=<span class="hljs-string">&quot;Reymonta&quot;</span> };
productContex.Suppliers.Add(supplier);
productContex.SaveChanges();
</div></code></pre>
<p>Teraz dodajmy dostawce do pola IsSuppliedBy naszego produktu:</p>
<pre><code class="language-c#"><div>ProductContext productContex = <span class="hljs-keyword">new</span> ProductContext();

<span class="hljs-keyword">var</span> prod = productContex.Products.SingleOrDefault(p =&gt; p.ProductName == <span class="hljs-string">&quot;mazak&quot;</span>);
<span class="hljs-keyword">var</span> sup = productContex.Suppliers.SingleOrDefault(s =&gt; s.CompanyName == <span class="hljs-string">&quot;Mlekopol&quot;</span>);
<span class="hljs-keyword">if</span> (prod != <span class="hljs-literal">null</span> &amp;&amp; sup != <span class="hljs-literal">null</span>)
{
    prod.IsSuppliedBy = sup;
    productContex.SaveChanges();
}
</div></code></pre>
<p>Sprawdźmy teraz za pomocą dataGripa jak wygląda nasza baza danych</p>
<pre><code class="language-sql"><div><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Products;
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Suppliers;
</div></code></pre>
<p><img src=".\images\dg1png.png" alt="1"></p>
<p><img src=".\images\dg2.png" alt="1"></p>
<h2 id="2-odwracanie-relacji">2. Odwracanie relacji</h2>
<p>Tak wygląda klasa <em>Product</em>:</p>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> ProductID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? ProductName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> UnitsOnStock { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
</div></code></pre>
<p>A tak wygląda klasa <em>Supplier</em>:</p>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Supplier</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> SupplierID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? CompanyName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? Street { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? City { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> ICollection&lt;Product&gt; Supplies { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
</div></code></pre>
<p>Następnie po wykonaniu migracji oraz update'u bazy danych wykonujemy kod:</p>
<pre><code class="language-c#"><div>ProductContext productContext = <span class="hljs-keyword">new</span> ProductContext();

Product flamaster = <span class="hljs-keyword">new</span> Product { ProductName=<span class="hljs-string">&quot;flamaster&quot;</span>, UnitsOnStock=<span class="hljs-number">2</span>};
Product kreda = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;kreda&quot;</span>, UnitsOnStock = <span class="hljs-number">3</span> };
Product dlugopis= <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;dlugopis&quot;</span>, UnitsOnStock = <span class="hljs-number">1</span> };
Product linijka = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;linijka&quot;</span>, UnitsOnStock = <span class="hljs-number">5</span> };
Product ekierka = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;ekierka&quot;</span>, UnitsOnStock = <span class="hljs-number">3</span> };

Supplier supplier1 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;PisadlaCompany&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Reymonta&quot;</span>, Supplies = <span class="hljs-keyword">new</span> LinkedList&lt;Product&gt;() };
Supplier supplier2 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;Linijka&amp;Ekierka&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Nawojki&quot;</span>, Supplies = <span class="hljs-keyword">new</span> LinkedList&lt;Product&gt;() };
supplier1.Supplies.Add(flamaster);
supplier1.Supplies.Add(kreda);
supplier1.Supplies.Add(dlugopis);
supplier2.Supplies.Add(linijka);
supplier2.Supplies.Add(ekierka);

productContext.Products.Add(flamaster);
productContext.Products.Add(kreda);
productContext.Products.Add(dlugopis);
productContext.Products.Add(linijka);
productContext.Products.Add(ekierka);

productContext.Suppliers.Add(supplier1);
productContext.Suppliers.Add(supplier2);

productContext.SaveChanges();
</div></code></pre>
<p>Sprawdźmy więc jak wygląda nasza baza danych.</p>
<p>Tak wygląda schemat bazy:</p>
<p><img src=".\images\swapdg3.png" alt="1"></p>
<p>A tak wyglądają tabele</p>
<pre><code class="language-sql"><div><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Products;
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Suppliers;
</div></code></pre>
<p><img src=".\images\swapdg1.png" alt="1"></p>
<p><img src=".\images\swapdg2.png" alt="1"></p>
<p>Na tym przykładzie możemy dokonać ciekawej obserwacji. Jak widać w naszej tabeli <em>Suppliers</em> nie ma kolumny <em>Supplies</em>, to dlatego, że byłoby to bez sensu bo relacyjna baza danych nie wspiera takiego typu wartości. Zamiast tego widzimy pole <em>SupplierID</em> w tabeli <em>Products</em>, pokazuje to jak w rzeczywistości działa code-first approach, my jako programiści tworzymy pewną logikę zrozumiałą dla nas oraz dla c#. Natomiast Entity framework tłumaczy tą logikę na świat relacyjnych baz danych.</p>
<h2 id="3-relacja-dwustronna">3. Relacja dwustronna</h2>
<p>Zacznijmy od usunięcia danych:</p>
<pre><code class="language-c#"><div>ProductContext productContext = <span class="hljs-keyword">new</span> ProductContext();

<span class="hljs-keyword">var</span> query = <span class="hljs-keyword">from</span> prod <span class="hljs-keyword">in</span> productContext.Products
            <span class="hljs-keyword">select</span> prod;

<span class="hljs-keyword">var</span> query2 = <span class="hljs-keyword">from</span> sup <span class="hljs-keyword">in</span> productContext.Suppliers
             <span class="hljs-keyword">select</span> sup;

<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> product <span class="hljs-keyword">in</span> query)
{
    productContext.Remove(product);
}

<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> sup <span class="hljs-keyword">in</span> query2)
{
    productContext.Remove(sup);
}

productContext.SaveChanges();
</div></code></pre>
<p>Następnie zmodyfikujmy klasę <em>Product</em>:</p>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> ProductID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ProductName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> UnitsOnStock{ <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> Supplier SuppliedBy { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
</div></code></pre>
<p>I ostatecznie dodajmy na nowo produkty:</p>
<pre><code class="language-c#"><div>ProductContext productContext = <span class="hljs-keyword">new</span> ProductContext();

Product flamaster = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;flamaster&quot;</span>, UnitsOnStock = <span class="hljs-number">2</span> };
Product kreda = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;kreda&quot;</span>, UnitsOnStock = <span class="hljs-number">3</span> };
Product dlugopis = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;dlugopis&quot;</span>, UnitsOnStock = <span class="hljs-number">1</span> };
Product linijka = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;linijka&quot;</span>, UnitsOnStock = <span class="hljs-number">5</span> };
Product ekierka = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;ekierka&quot;</span>, UnitsOnStock = <span class="hljs-number">3</span> };

Supplier supplier1 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;PisadlaCompany&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Reymonta&quot;</span>, Supplies = <span class="hljs-keyword">new</span> LinkedList&lt;Product&gt;() };
Supplier supplier2 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;Linijka&amp;Ekierka&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Nawojki&quot;</span>, Supplies = <span class="hljs-keyword">new</span> LinkedList&lt;Product&gt;() };
supplier1.Supplies.Add(flamaster);
supplier1.Supplies.Add(kreda);
supplier1.Supplies.Add(dlugopis);
supplier2.Supplies.Add(linijka);
supplier2.Supplies.Add(ekierka);

flamaster.SuppliedBy = supplier1;
kreda.SuppliedBy = supplier1;
dlugopis.SuppliedBy = supplier1;
linijka.SuppliedBy = supplier2;
ekierka.SuppliedBy = supplier2;

productContext.Products.Add(flamaster);
productContext.Products.Add(kreda);
productContext.Products.Add(dlugopis);
productContext.Products.Add(linijka);
productContext.Products.Add(ekierka);

productContext.SaveChanges();
</div></code></pre>
<p>Tak wygląda schemat bazy danych:</p>
<p><img src=".\images\bothdiagram.png" alt="1"></p>
<p>Zobaczmy jak wyglądają tabele:</p>
<pre><code class="language-sql"><div><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Products;
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> Suppliers;
</div></code></pre>
<p><img src=".\images\both1.png" alt="1"></p>
<p><img src=".\images\both2.png" alt="1"></p>
<p>Ponownie widać, że struktura kodu jest inna niż struktura bazy danych.</p>
<h2 id="4-many-to-many">4. Many to many</h2>
<p>Zaczynami od usunięcia produktów z bazy danych. Następnie dodajemy klasę <em>Invoice</em>:</p>
<pre><code class="language-c#"><div><span class="hljs-keyword">using</span> System.ComponentModel.DataAnnotations;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">KarolWronaEFProducts</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Invoice</span>
    {
        [<span class="hljs-meta">Key</span>]
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> InvoiceNumber { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Quantity { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> ICollection&lt;Product&gt; Includes { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
}
</div></code></pre>
<p>Tutaj musieliśmy dodać także specjalnego usinga.</p>
<p>Modyfikujemy klase <em>Product</em> oraz <em>ProductContext</em>:</p>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> ProductID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ProductName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> UnitsOnStock{ <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> Supplier SuppliedBy { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

        <span class="hljs-keyword">public</span> ICollection&lt;Invoice&gt; CanBeSoldIn { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    }
</div></code></pre>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProductContext</span> : <span class="hljs-title">DbContext</span>
    {
        <span class="hljs-keyword">public</span> DbSet&lt;Product&gt; Products { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> DbSet&lt;Supplier&gt; Suppliers { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> DbSet&lt;Invoice&gt; Invoices { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }


        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnConfiguring</span>(<span class="hljs-params">DbContextOptionsBuilder optionsBuilder</span>)</span>
        {
            <span class="hljs-keyword">base</span>.OnConfiguring(optionsBuilder);
            optionsBuilder.UseSqlite(<span class="hljs-string">&quot;Datasource=ProductDatabase&quot;</span>);
        }
    }
</div></code></pre>
<p>Teraz dodajmy nowe dane do bazy danych:</p>
<pre><code class="language-c#"><div>ProductContext productContext = <span class="hljs-keyword">new</span> ProductContext();

Product flamaster = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;flamaster&quot;</span>, UnitsOnStock = <span class="hljs-number">2</span>, CanBeSoldIn = <span class="hljs-keyword">new</span> LinkedList&lt;Invoice&gt;() };
Product kreda = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;kreda&quot;</span>, UnitsOnStock = <span class="hljs-number">3</span>, CanBeSoldIn = <span class="hljs-keyword">new</span> LinkedList&lt;Invoice&gt;() };
Product dlugopis = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;dlugopis&quot;</span>, UnitsOnStock = <span class="hljs-number">1</span>, CanBeSoldIn = <span class="hljs-keyword">new</span> LinkedList&lt;Invoice&gt;() };
Product linijka = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;linijka&quot;</span>, UnitsOnStock = <span class="hljs-number">5</span>, CanBeSoldIn = <span class="hljs-keyword">new</span> LinkedList&lt;Invoice&gt;() };
Product ekierka = <span class="hljs-keyword">new</span> Product { ProductName = <span class="hljs-string">&quot;ekierka&quot;</span>, UnitsOnStock = <span class="hljs-number">3</span>, CanBeSoldIn = <span class="hljs-keyword">new</span> LinkedList&lt;Invoice&gt;() };

Invoice invoice1 = <span class="hljs-keyword">new</span> Invoice { Quantity = <span class="hljs-number">1</span> , Includes = <span class="hljs-keyword">new</span> LinkedList&lt;Product&gt;()};
Invoice invoice2 = <span class="hljs-keyword">new</span> Invoice { Quantity = <span class="hljs-number">1</span> , Includes = <span class="hljs-keyword">new</span> LinkedList&lt;Product&gt;() };

flamaster.CanBeSoldIn.Add(invoice1);
flamaster.CanBeSoldIn.Add(invoice2);
kreda.CanBeSoldIn.Add(invoice1);
dlugopis.CanBeSoldIn.Add(invoice1);
linijka.CanBeSoldIn.Add(invoice2);
ekierka.CanBeSoldIn.Add(invoice2);

invoice1.Includes.Add(flamaster);
invoice1.Includes.Add(kreda);
invoice1.Includes.Add(dlugopis);
invoice2.Includes.Add(linijka);
invoice2.Includes.Add(ekierka);
invoice2.Includes.Add(flamaster);

Supplier supplier1 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;PisadlaCompany&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Reymonta&quot;</span>, Supplies = <span class="hljs-keyword">new</span> LinkedList&lt;Product&gt;() };
Supplier supplier2 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;Linijka&amp;Ekierka&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Nawojki&quot;</span>, Supplies = <span class="hljs-keyword">new</span> LinkedList&lt;Product&gt;() };
supplier1.Supplies.Add(flamaster);
supplier1.Supplies.Add(kreda);
supplier1.Supplies.Add(dlugopis);
supplier2.Supplies.Add(linijka);
supplier2.Supplies.Add(ekierka);

flamaster.SuppliedBy = supplier1;
kreda.SuppliedBy = supplier1;
dlugopis.SuppliedBy = supplier1;
linijka.SuppliedBy = supplier2;
ekierka.SuppliedBy = supplier2;

productContext.Products.Add(flamaster);
productContext.Products.Add(kreda);
productContext.Products.Add(dlugopis);
productContext.Products.Add(linijka);
productContext.Products.Add(ekierka);

productContext.Invoices.Add(invoice1);
productContext.Invoices.Add(invoice2);

productContext.Suppliers.Add(supplier1);
productContext.Suppliers.Add(supplier2);

productContext.SaveChanges();
</div></code></pre>
<p>Sprawdźmy jak wygląda schemat naszej bazy Danych:</p>
<p><img src=".\images\multidiagram.png" alt="1"></p>
<p>Wbrew pozorom entity framework jest dość inteligentny, aby zamodelować zadaną przez nas relację stworzył on nową tablicę <em>Invoice Product</em>, dokładnie tak jakbyśmy to robili modelując bazę danych w pierwszej kolejności.</p>
<p>Wykonajmy teraz kilka podzapytań do naszej bazy danych.</p>
<p>Wypisz listę produktów z danej faktury:</p>
<pre><code class="language-c#"><div><span class="hljs-keyword">var</span> query = <span class="hljs-keyword">from</span> invoice <span class="hljs-keyword">in</span> productContext.Invoices
            <span class="hljs-keyword">where</span> invoice.InvoiceNumber == <span class="hljs-number">1</span>
            <span class="hljs-keyword">select</span> invoice.Includes;

Console.WriteLine(<span class="hljs-string">&quot;Products buy in invoice nr1: &quot;</span>);
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> invoice <span class="hljs-keyword">in</span> query)
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> prod <span class="hljs-keyword">in</span> invoice)
    {
        Console.WriteLine(prod.ProductName);
    }
}
</div></code></pre>
<p><img src=".\images\res1.png" alt="1"></p>
<p>Wypisz listę faktur w których występował dany produkt:</p>
<pre><code class="language-c#"><div><span class="hljs-keyword">var</span> query = <span class="hljs-keyword">from</span> product <span class="hljs-keyword">in</span> productContext.Products
            <span class="hljs-keyword">where</span> product.ProductID == <span class="hljs-number">1</span>
            <span class="hljs-keyword">select</span> product.CanBeSoldIn;

Console.WriteLine(<span class="hljs-string">&quot;Invoices where product nr.1 was sold: &quot;</span>);
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> query)
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> invoice <span class="hljs-keyword">in</span> item)
    {
        Console.WriteLine(invoice.InvoiceNumber);
    }
}
</div></code></pre>
<p><img src=".\images\res2.png" alt="1"></p>
<h2 id="5-dziedziczenie---table-per-hierarchy">5. Dziedziczenie - table per hierarchy</h2>
<p>Klasycznie rozpocząłem od wyczyszczenia danych. Następnie dodałem naszą nową klasę <em>Company</em>:</p>
<pre><code class="language-c#"><div><span class="hljs-keyword">namespace</span> <span class="hljs-title">KarolWronaEFProducts</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Company</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> CompanyID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> CompanyName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Street { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> City { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ZipCode { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
}
</div></code></pre>
<p>Dodałem dwie klasy dziedziczące po niej:</p>
<pre><code class="language-c#"><div><span class="hljs-keyword">namespace</span> <span class="hljs-title">KarolWronaEFProducts</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span> : <span class="hljs-title">Company</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span>? Discount { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
}
</div></code></pre>
<pre><code class="language-c#"><div><span class="hljs-keyword">namespace</span> <span class="hljs-title">KarolWronaEFProducts</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Supplier</span> : <span class="hljs-title">Company</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? BankAccountNumber { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
}
</div></code></pre>
<p>Aby wszystko zadziałało trzeba jeszcze dokonać paru zmian w <em>ProductContext</em>:</p>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProductContext</span> : <span class="hljs-title">DbContext</span>
    {
        <span class="hljs-keyword">public</span> DbSet&lt;Product&gt; Products { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> DbSet&lt;Company&gt; Companies { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> DbSet&lt;Invoice&gt; Invoices { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }


        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnConfiguring</span>(<span class="hljs-params">DbContextOptionsBuilder optionsBuilder</span>)</span>
        {
            <span class="hljs-keyword">base</span>.OnConfiguring(optionsBuilder);
            optionsBuilder.UseSqlite(<span class="hljs-string">&quot;Datasource=ProductDatabase&quot;</span>);
        }

        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnModelCreating</span>(<span class="hljs-params">ModelBuilder modelBuilder</span>)</span>
        {
            modelBuilder.Entity&lt;Customer&gt;();
            modelBuilder.Entity&lt;Supplier&gt;();
        }
    }
</div></code></pre>
<p>Teraz możemy dodać nowe dane do bazy danych.</p>
<pre><code class="language-c#"><div>ProductContext productContext = <span class="hljs-keyword">new</span> ProductContext();

Company supplier1 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;PisadlaCompany&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Reymonta&quot;</span>, ZipCode = <span class="hljs-string">&quot;12-123&quot;</span>, BankAccountNumber = <span class="hljs-string">&quot;123456789&quot;</span> };
Company supplier2 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;Linijka&amp;Ekierka&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Nawojki&quot;</span>, ZipCode = <span class="hljs-string">&quot;12-345&quot;</span>, BankAccountNumber = <span class="hljs-string">&quot;987654321&quot;</span> };

Company person1 = <span class="hljs-keyword">new</span> Customer { CompanyName = <span class="hljs-string">&quot;Maciej&quot;</span>, City = <span class="hljs-string">&quot;Warsaw&quot;</span>, Street = <span class="hljs-string">&quot;Marszalkowska&quot;</span>, ZipCode = <span class="hljs-string">&quot;31-234&quot;</span>, Discount = <span class="hljs-number">0.12</span>M };
Company person2 = <span class="hljs-keyword">new</span> Customer { CompanyName = <span class="hljs-string">&quot;Adam&quot;</span>, City = <span class="hljs-string">&quot;Wroclaw&quot;</span>, Street = <span class="hljs-string">&quot;Slodowa&quot;</span>, ZipCode = <span class="hljs-string">&quot;35-234&quot;</span>, Discount = <span class="hljs-number">0.8</span>M };

productContext.Companies.Add(person1);
productContext.Companies.Add(person2);
productContext.Companies.Add(supplier1);
productContext.Companies.Add(supplier2);

productContext.SaveChanges();
</div></code></pre>
<p>Sprawdźmy jak wygląda nasza baza danych:</p>
<p><img src=".\images\DiagramDziedziczenie1.png" alt="1"></p>
<p><img src=".\images\dziedziczenie1.png" alt="1"></p>
<p>Jak widać entity framework wyśmieniecie poradził sobie z tym zadaniem i utworzył jedną wspólną tabele, która zawiera kolumny właściwe dla klasy nadrzędnej i wszystkich klas dziedziczących po niej. Framework dodał nawet kolumnę <em>Discriminator</em>, która pozwala na odróźnienie jakiej klasy jest dana encja.</p>
<p>Wykonajmy kilka podzapytań do naszej bazy danych:</p>
<pre><code class="language-c#"><div><span class="hljs-keyword">var</span> query = <span class="hljs-keyword">from</span> comp <span class="hljs-keyword">in</span> productContext.Companies
            <span class="hljs-keyword">where</span> comp.CompanyID == <span class="hljs-number">1</span>
            <span class="hljs-keyword">select</span> comp.CompanyName;

Console.WriteLine(<span class="hljs-string">&quot;Name of company with CompanyID = 1&quot;</span>);
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> query)
{
    Console.WriteLine(name);
}

<span class="hljs-keyword">var</span> query2 = <span class="hljs-keyword">from</span> comp <span class="hljs-keyword">in</span> productContext.Companies
             <span class="hljs-keyword">where</span> comp.CompanyID == <span class="hljs-number">3</span>
             <span class="hljs-keyword">select</span> comp.CompanyName;

Console.WriteLine(<span class="hljs-string">&quot;Name of company with CompanyID = 3&quot;</span>);
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> query2)
{
    Console.WriteLine(name);
}
</div></code></pre>
<p>I dostajemy taki oto rezultat:</p>
<p><img src=".\images\res3.png" alt="1"></p>
<h2 id="6-dziedziczenie---table-per-class">6. Dziedziczenie - table per class</h2>
<p>Tym razem chcemy mieć osobną tablicę dla każdej klasy dziedziczącej po <em>Company</em>. Aby to zrobić musimy przedewszystkim zmienić <em>ProductContext</em>:</p>
<pre><code class="language-c#"><div>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProductContext</span> : <span class="hljs-title">DbContext</span>
    {
        <span class="hljs-keyword">public</span> DbSet&lt;Product&gt; Products { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> DbSet&lt;Company&gt; Companies { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> DbSet&lt;Customer&gt; Customers { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> DbSet&lt;Supplier&gt; Suppliers { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> DbSet&lt;Invoice&gt; Invoices { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }


        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnConfiguring</span>(<span class="hljs-params">DbContextOptionsBuilder optionsBuilder</span>)</span>
        {
            <span class="hljs-keyword">base</span>.OnConfiguring(optionsBuilder);
            optionsBuilder.UseSqlite(<span class="hljs-string">&quot;Datasource=ProductDatabase&quot;</span>);
        }
    }
</div></code></pre>
<p>Jak widać &quot;dodaliśmy&quot; tabele Customers i Suppliers, mogło by się więc wydawać, że to wszystko co trzeba zrobić. Jednak Entity Framework to zdradliwe narzędzie gdyż wynikiem takiego kodu byłby model table for hierarchy. Aby to naprawić trzeba dodać odpowiednie adnotacje:</p>
<pre><code class="language-c#"><div>    [<span class="hljs-meta">Table(<span class="hljs-meta-string">&quot;Companies&quot;</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Company</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> CompanyID { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> CompanyName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Street { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> City { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> ZipCode { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
</div></code></pre>
<pre><code class="language-c#"><div>    [<span class="hljs-meta">Table(<span class="hljs-meta-string">&quot;Customers&quot;</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Customer</span> : <span class="hljs-title">Company</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span>? Discount { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
</div></code></pre>
<pre><code class="language-c#"><div>    [<span class="hljs-meta">Table(<span class="hljs-meta-string">&quot;Suppliers&quot;</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Supplier</span> : <span class="hljs-title">Company</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? BankAccountNumber { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    }
</div></code></pre>
<p>Teraz spróbujmy dodać nowe dane do bazy:</p>
<pre><code class="language-c#"><div>ProductContext productContext = <span class="hljs-keyword">new</span> ProductContext();

Company supplier1 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;PisadlaCompany&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Reymonta&quot;</span>, ZipCode = <span class="hljs-string">&quot;12-123&quot;</span>, BankAccountNumber = <span class="hljs-string">&quot;123456789&quot;</span> };
Company supplier2 = <span class="hljs-keyword">new</span> Supplier { CompanyName = <span class="hljs-string">&quot;Linijka&amp;Ekierka&quot;</span>, City = <span class="hljs-string">&quot;Cracow&quot;</span>, Street = <span class="hljs-string">&quot;Nawojki&quot;</span>, ZipCode = <span class="hljs-string">&quot;12-345&quot;</span>, BankAccountNumber = <span class="hljs-string">&quot;987654321&quot;</span> };

Company person1 = <span class="hljs-keyword">new</span> Customer { CompanyName = <span class="hljs-string">&quot;Maciej&quot;</span>, City = <span class="hljs-string">&quot;Warsaw&quot;</span>, Street = <span class="hljs-string">&quot;Marszalkowska&quot;</span>, ZipCode = <span class="hljs-string">&quot;31-234&quot;</span>, Discount = <span class="hljs-number">0.12</span>M };
Company person2 = <span class="hljs-keyword">new</span> Customer { CompanyName = <span class="hljs-string">&quot;Adam&quot;</span>, City = <span class="hljs-string">&quot;Wroclaw&quot;</span>, Street = <span class="hljs-string">&quot;Slodowa&quot;</span>, ZipCode = <span class="hljs-string">&quot;35-234&quot;</span>, Discount = <span class="hljs-number">0.8</span>M };

Company company1 = <span class="hljs-keyword">new</span> Company { CompanyName = <span class="hljs-string">&quot;JustCompany&quot;</span>, City = <span class="hljs-string">&quot;Katowice&quot;</span>, Street = <span class="hljs-string">&quot;Francuska&quot;</span>, ZipCode = <span class="hljs-string">&quot;19-234&quot;</span> };

productContext.Companies.Add(person1);
productContext.Companies.Add(person2);
productContext.Companies.Add(supplier1);
productContext.Companies.Add(supplier2);
productContext.Companies.Add(company1);

productContext.SaveChanges();
</div></code></pre>
<p>Sprawdźmy jak wygląda schemat naszej bazy danych:</p>
<p><img src=".\images\diagramtpt.png" alt="1"></p>
<p>Zobaczmy jak wyglądają tabele:</p>
<p><img src=".\images\tpt1.png" alt="1"></p>
<p><img src=".\images\tpt2.png" alt="1"></p>
<p><img src=".\images\tpt3.png" alt="1"></p>
<p>Warto zauważyć, że w tabeli <em>Companies</em> znajdują się wszystkie obiekty dziedzczące po <em>Company</em>. Kolumny tej tabeli zawierają pola wspólne dla tych klas, natomiast w tabelach <em>Customers</em>, <em>Suppliers</em> znajdują się informacje odpowiednie tylko dla tych klas. Zauważmy jednak, że tracimy kolumnę <em>Discriminator</em>, która pozwala nam w łatwy sposób odróżnić od siebie encje.</p>
<p>Na koniec wykonajmy kilka podzapytań do tej bazy danych z poziomu aplikacji:</p>
<pre><code class="language-c#"><div>Console.WriteLine(<span class="hljs-string">&quot;Print companies that are neither Customer nor Supplier: &quot;</span>);

<span class="hljs-keyword">var</span> query = productContext.Companies.Where(a =&gt; !productContext.Suppliers.Any(b =&gt; b.CompanyID == a.CompanyID) &amp;&amp;
!productContext.Customers.Any(c =&gt; c.CompanyID == a.CompanyID));

<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> comp <span class="hljs-keyword">in</span> query)
{
    Console.WriteLine(comp.CompanyName);
}

<span class="hljs-keyword">var</span> query2 = <span class="hljs-keyword">from</span> comp <span class="hljs-keyword">in</span> productContext.Suppliers
             <span class="hljs-keyword">where</span> comp.BankAccountNumber != <span class="hljs-literal">null</span>
             <span class="hljs-keyword">select</span> comp.CompanyName;

Console.WriteLine(<span class="hljs-string">&quot;Names of companies with bank account: &quot;</span>);
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> query2)
{
    Console.WriteLine(name);
}
</div></code></pre>
<p><img src=".\images\res4.png" alt="1"></p>
<h2 id="podsumowanie-dziedziczenia">Podsumowanie dziedziczenia</h2>
<p>Jak widać model table-for-hierarchy skutukuje powstaniem jednej, dużej tabeli, w której znajduje się suma wszystkich mapowanych właściowści klas oraz kolumna rożróźniająca poszczególne klasy. Oznacza to, że prawdopodobnie duża część z nich będzie miała wartość null. Osobiście to podejście spodobało mi się najbardziej, szczególnie z względu na to, że bardzo łatwo można dostać informację o tym jakiej klasy jest dana encja. Rozwiązanie to jednak dużo traci w przypadku klas z dużą ilością pól, w tym wypadku model table-for-type zyskuje zdecydowaną przewagę gdyż nie tworzy tabeli z ogromną ilością kolumn więc pozwala na zachowanie rozsądnej struktury naszej bazy. Także w przypadku gdy mamy dużą ilość danych zdecydowałbym się na model TPT ze względu na mniejszą ilość <em>&quot;nulli&quot;</em>.</p>

        
        
    </body>
    </html>